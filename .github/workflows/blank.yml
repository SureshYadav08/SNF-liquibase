name: Snowflake Liquibase Deployment

on:
  workflow_dispatch 

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Clone Repo
      - uses: actions/checkout@v3

      - name: Set up Java
        uses: actions/setup-java@v3
        with:
          java-version: '11'  
          distribution: 'adopt'
          
      - name: Install Liquibase extension
        run: mvn com.microsoft.azure:azure-maven-plugin:install-jar
      
      - name: Deploy changes to Snowflake
        run: mvn liquibase:update
        env:
          $env:SNOWFLAKE_ACCOUNT: "cupueci-lmb72269"
          $env:SNOWFLAKE_USER: "SureshYadav"
          $env:SNOWFLAKE_PASSWORD: "Welcome@123"
          $env:SNOWFLAKE_DATABASE: "QUALITY"
          $env:SNOWFLAKE_WAREHOUSE: "COMPUTE_WH"
          $env:SNOWFLAKE_SCHEMA: "DEV"
